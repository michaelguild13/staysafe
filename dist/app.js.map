{"version":3,"sources":["dist/app.js"],"names":[],"mappings":"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","file":"dist/app.js","sourcesContent":["var MapBox = React.createClass({\n    componentDidMount: function () {\n        map = L.mapbox.map('map', 'mapbox.streets');\n        map.setView([47.594972, -122.331518], 15);\n        layer.on('ready', function() {\n          // the layer has been fully loaded now, and you can\n          // call .getTileJSON and investigate its properties\n        });\n    },\n\n    render: function () {\n        return (\n            <section id=\"mapbox\" className=\"col-sm-8 col-sm-push-4\">\n                <div id=\"map\"></div>\n            </section>\n        );\n    }\n});\nvar MarkerCollection = React.createClass({\n    getInitialState: function() {\n        return {\n            crimes: []\n        };\n    },\n    componentDidMount: function () {\n        $.get(this.props.source, function(responce) {\n            if (this.isMounted()) {\n                this.setState({\n                    crimes: responce\n                });\n            }\n        }.bind(this));\n    },\n\n    handleMarker: function(evt) {\n        var lat = evt.target.dataset.lat,\n            lng = evt.target.dataset.lng;\n\n        map.setView([lat,lng], 18);\n        // #TODO: get location to open the pop up\n        //locations.eachLayer(function(locale) {\n        //var prop = locale.feature.properties;\n    },\n\n    handleFilter: function (evt) {\n        // #TODO: fix dupicated data\n        var filter = evt.target.dataset.filter,\n            data = this.state.crimes;\n        \n        var compare = function (filter) {\n            return function (a,b) {\n                var a = a[filter],\n                    b = b[filter];\n                \n                if (a < b) {\n                    return -1;\n                } else if (a > b) {\n                    return 1;\n                } else {\n                    return 0;\n                }\n            };\n        };\n\n        filter = compare(filter); //set filter\n        /*  NEVER mutate this.state directly, as calling setState() \n            afterwards may replace the mutation you made. \n            Treat this.state as if it were immutable. */\n        this.setState({crimes: data.sort(filter)}); // sort and update\n    },\n\n    render: function () {\n        var self = this,\n            markers = this.state.crimes || [];\n\n        return (\n            <div className=\"col-sm-4 col-sm-pull-8\">\n                <nav className=\"navbar navbar-default\">\n                    <div className=\"container-fluid\">\n                        <ul className=\"nav navbar-nav\">\n                            <li><a className=\"\" onClick={self.handleFilter} data-filter=\"event_clearance_group\" >Filter on Group</a></li>\n                            <li><a className=\"\" onClick={self.handleFilter} data-filter=\"event_clearance_code\" >Filter code</a></li>\n                        </ul>\n                    </div>\n                </nav>\n                <section id=\"crimes-listings\">\n                    <ul className=\"list-group\">\n                        {markers.map(function(markers){\n                            makeMarker(markers);\n                            return  <li className=\"list-group-item\" key={markers.cad_event_number}>\n                                        <a className=\"small\" onClick={self.handleMarker} data-lng={markers.longitude} data-lat={markers.latitude}>\n                                            {markers.event_clearance_group}\n                                        </a>\n                                        <span className=\"badge\">{markers.event_clearance_code}</span>\n                                    </li>\n                        })}\n                    </ul>\n                </section>\n            </div>\n          );\n    }\n});\n\nvar Navigation = React.createClass({\n    componentDidMount: function () {\n    },\n\n    handleFilter: function (evt) {\n        var filter = evt.target.dataset.filter;\n        console.log(filter);\n    },\n\n    render: function () {\n        var self = this;\n\n        return (\n            <nav className=\"navbar navbar-default\" id=\"top\" role=\"banner\">\n                <div className=\"container-fluid\">\n                    <div className=\"navbar-header\">\n                        <button type=\"button\" className=\"navbar-toggle collapsed\" data-toggle=\"collapse\" data-target=\"#bs-example-navbar-collapse-1\" aria-expanded=\"false\">\n                            <span className=\"sr-only\">Toggle navigation</span>\n                            <span className=\"icon-bar\"></span>\n                            <span className=\"icon-bar\"></span>\n                            <span className=\"icon-bar\"></span>\n                        </button>\n                        <a className=\"navbar-brand\" href=\"#\">StaySafe</a>\n                    </div>\n                    <div className=\"collapse navbar-collapse\" id=\"bs-example-navbar-collapse-1\">\n                        <ul className=\"nav navbar-nav\">\n                            <li><a onClick={self.handleFilter} data-filter=\"car\" >Don't Park Here</a></li>\n                            <li><a onClick={self.handleFilter} data-filter=\"assult\" >Don't Walk Here</a></li>\n                            <li><a onClick={self.handleFilter} data-filter=\"rob\" >Don't Shop Here</a></li>\n                            <li><a onClick={self.handleFilter} data-filter=\"stolen\" >Don't Buy a Home Here</a></li>\n                        </ul>\n                        <SearchInput />\n                    </div>\n                </div>\n            </nav>\n        );\n    }\n});\nvar SearchInput = React.createClass({\n    getInitialState: function() {\n        return {\n            value: \"800 Occidental Ave S, Seattle, WA 98134\"\n        };\n    },\n\n    setMapView: function (err, data) {\n        if (typeof data.lbounds !== 'undefined' && data.lbounds) {\n            map.fitBounds(data.lbounds);\n        } else if (data.latlng) {\n            map.setView([data.latlng[0], data.latlng[1]], 13);\n        }\n    },\n\n    handleChange: function(evt) {\n        geocoder.query(evt.target.value, this.setMapView);\n        this.setState({\n            value: evt.target.value\n        });\n    },\n\n    render: function() {\n        return (\n            <form className=\"navbar-form navbar-left\" role=\"search\">\n                <div className=\"form-group\">\n                    <input className=\"form-control\" value={this.state.value} onChange={this.handleChange} placeholder=\"insert address\"/>\n                </div>\n            </form>\n        );\n    }\n});\n// Bootstrap\n$('.dropdown-toggle').dropdown();\n\n\"use strict\"; //ecmaSCRIPT\n\nfunction getIconType (context) {\n    var context = context.replace(/\\W/g, \"\").toLowerCase(),\n        icons = {\n        'default' : {\n            color: '#dfdfde',\n            symbol: 'circle'\n        },\n        'accidentinvestigation' : {\n            color: '#ff6501',\n            symbol: 'heliport'\n        },\n        'assault' : {\n            color: '#ba98cd',\n            symbol: 'logging'\n        },\n        'arrest' : {\n            color: '#a7bd2f',\n            symbol: 'police'\n        },\n        'animalcomplaints' : {\n            color: '#bd8c2f',\n            symbol: 'dog-park'\n        },\n        'burglary' : {\n            color: '#c60000',\n            symbol: 'village'\n        },\n        'robbery' : {\n            color: '#fffdd6',\n            symbol: 'pitch'\n        },\n        'carprowl' : {\n            color: '#a0b7da',\n            symbol: 'car'\n        },\n        'disturbances' : {\n            color: '#014783',\n            symbol: 'oil-well'\n        },\n        'falsealarms' : {\n            color: '#8caba8',\n            symbol: 'roadblock'\n        },\n        'fraudcalls' : {\n            color: '#ebdada',\n            symbol: 'emergency-telephone'\n        },\n        'liquorviolations' : {\n            color: '#d7c6cf',\n            symbol: 'alcohol-shop'\n        },\n        'mentalhealth' : {\n            color: '#a2798f',\n            symbol: 'disability'\n        },\n        'narcoticscomplaints' : {\n            color: '#c39797',\n            symbol: 'pharmacy'\n        },\n        'nuisancemischief' : {\n            color: '#d3ffce',\n            symbol: 'skiing'\n        },\n        'otherproperty' : {\n            color: '#e6ac39',\n            symbol: 'building'\n        },\n        'prostitution'\n         : {\n            color: '#89a647',\n            symbol: 'heart'\n        },\n        'propertydamage' : {\n            color: '#855549',\n            symbol: 'baseball'\n        },\n        'prowler' : {\n            color: '#6b64a8',\n            symbol: 'school'\n        },\n        'propertymissingfound' : {\n            color: '#d77b37',\n            symbol: 'bicycle'\n        },\n        'persondowninjury' : {\n            color: '#57aea0',\n            symbol: 'hospital'\n        },\n        'personslostfoundmissing' : {\n            color: '#00e6e6',\n            symbol: 'playground'\n        },\n        'shoplifting' : {\n            color: '#009999',\n            symbol: 'grocery'\n        },\n        'suspiciouscircumstances' : {\n            color: '#11b2b2',\n            symbol: 'theatre'\n        },\n        'trafficrelatedcalls' : {\n            color: '#11b7b7',\n            symbol: 'bus'\n        },\n        'threatsharassment' : {\n            color: '#afb4bb',\n            symbol: 'danger'\n        },\n        'trespass' : {\n            color: '#e93b46',\n            symbol: 'prison'\n        }\n    };\n\n    return icons[context] || icons['default'];\n}\n\nfunction makeMarker (context) {\n    var icon = getIconType(context.event_clearance_group);\n    L.mapbox.featureLayer({\n        cad_cdw_id: context.cad_cdw_id,\n        type: 'Feature',\n        geometry: {\n            type: 'Point',\n            coordinates: [\n              context.longitude,\n              context.latitude\n            ]\n        },\n        properties: {\n            title: context.event_clearance_group + ' at ' +context.hundred_block_location + ' (' + context.cad_event_number +')',\n            description: context.initial_type_description ,\n            'marker-size': 'large',\n            'marker-color': icon.color,\n            'marker-symbol': icon.symbol\n        }\n    }).addTo(map);\n}\n\n// Global Scopes\n// #TODO: remove Global Vars and switch to a parent container for map & other compoments\nvar layer = L.mapbox.tileLayer('mapbox.streets'),\n    geocoder = L.mapbox.geocoder('mapbox.places'),\n    map;\n\n// #TODO: Move ajax into a promise that will fill collection to alow custom filtering with $q\n// http://dev.socrata.com/docs/queries.html\nvar App = React.createClass({\n    getInitialState: function () {\n        return {\n            layer: L.mapbox.tileLayer('mapbox.streets'),\n            geocoder: L.mapbox.geocoder('mapbox.places'),\n            map: null\n        }\n    },\n    render: function () {\n        return (\n            <div>\n                <Navigation />\n                <article id=\"app\" className=\"container\">\n                    <div className=\"row\">\n                        <MapBox />\n                        <MarkerCollection source=\"https://data.seattle.gov/resource/3k2p-39jp.json?$limit=50&$where=within_circle(incident_location, 47.594972, -122.331518, 1609.34)\" />\n                    </div>\n                </article>\n            </div>\n        );\n    }\n});\n\nReact.render(\n    <App />,\n    document.body\n);\n"]}